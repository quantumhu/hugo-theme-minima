{{ define "main" }}
<div class="container mx-auto">
  <h1 class="text-4xl font-extrabold mt-6 mb-6">{{ .Title }}</h1>
  <div class="mb-8 text-sm flex justify-between ">
    <div>
      {{ if .Site.Params.displayDate }}
      <span title="{{ .Date | time.Format ":time_long" }}">
      {{ T "post.on" }} {{ .Date | time.Format (T "timeformat") }}
      </span>
      {{ end }}
      {{ if .Draft }}
      <span class="ml-3 tag">
        DRAFT
      </span>
      {{ end }}
    </div>
    {{ if .Params.tags }}
    <div>
      {{ range $tag := .Params.tags }}
      {{ $url := printf "tags/%s" $tag | relLangURL }}
      <a class="ml-1" href="{{ $url }}">#{{ . }}</a>
      {{ end }}
    </div>
    {{ end }}
  </div>
  <main class="mb-8">
    {{ if .Params.seriesparts.name }}
      {{ $seriesparts := where .Site.RegularPages ".Params.seriesparts.name" .Params.seriesparts.name }}
      {{ if gt (len $seriesparts) 1 }}
        {{ $seriesparts := sort $seriesparts ".Params.seriesparts.part" }}
        {{ $links := slice }}
        {{ range $part := $seriesparts }}
          {{ if not (eq $part.Params.seriesparts.part $.Params.seriesparts.part) }}
            {{ $links = $links | append (printf "<a href=\"%s\">Part %d</a>" $part.Permalink $part.Params.seriesparts.part) }}
          {{ end }}
        {{ end }}
        <p class="mb-8 text-sm"><i>{{ printf (T "seriesparts.blurb") .Params.seriesparts.part (len $seriesparts) .Params.seriesparts.name (delimit $links ", ") | safeHTML }}</i></p>
      {{ end }}
    {{ end }}
    <p>{{ .Description | markdownify | safeHTML }}</p>
    <article class="md">
      {{ .Content }}
    </article>
  </main>
  {{ partial "plugin.html" . }}
</div>
{{ end }}